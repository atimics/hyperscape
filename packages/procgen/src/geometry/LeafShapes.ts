/**
 * Leaf Shape Definitions
 *
 * Predefined geometries for leaf and blossom meshes.
 * Port of the Python leaf_shapes.py file.
 *
 * Each shape is defined by:
 * - vertices: Array of [x, y, z] positions
 * - faces: Array of face indices (can be triangles or quads)
 * - uvs: Optional UV coordinates for texturing
 */

import {
  LeafShape,
  BlossomShape,
  type LeafShapeGeometry,
  type LeafShapeType,
  type BlossomShapeType,
} from "../types.js";

/**
 * Ovate leaf shape (egg-shaped).
 */
const OVATE: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.005, 0, 0.1],
    [0.15, 0, 0.15],
    [0.25, 0, 0.3],
    [0.2, 0, 0.6],
    [0, 0, 1],
    [-0.2, 0, 0.6],
    [-0.25, 0, 0.3],
    [-0.15, 0, 0.15],
    [-0.005, 0, 0.1],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 9, 10],
    [1, 2, 3, 4],
    [4, 5, 6],
    [6, 7, 8, 9],
    [4, 6, 9, 1],
  ],
};

/**
 * Linear leaf shape (narrow, grass-like).
 */
const LINEAR: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.005, 0, 0.1],
    [0.1, 0, 0.15],
    [0.1, 0, 0.95],
    [0, 0, 1],
    [-0.1, 0, 0.95],
    [-0.1, 0, 0.15],
    [-0.005, 0, 0.1],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 7, 8],
    [1, 2, 3],
    [3, 4, 5],
    [5, 6, 7],
    [1, 3, 5, 7],
  ],
};

/**
 * Cordate leaf shape (heart-shaped).
 */
const CORDATE: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.01, 0, 0.2],
    [0.2, 0, 0.1],
    [0.35, 0, 0.35],
    [0.25, 0, 0.6],
    [0.1, 0, 0.8],
    [0, 0, 1],
    [-0.1, 0, 0.8],
    [-0.25, 0, 0.6],
    [-0.35, 0, 0.35],
    [-0.2, 0, 0.1],
    [-0.01, 0, 0.2],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 11, 12],
    [1, 2, 3, 4],
    [11, 10, 9, 8],
    [11, 1, 4, 8],
    [8, 7, 6, 5, 4],
  ],
};

/**
 * Maple leaf shape.
 */
const MAPLE: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.005, 0, 0.1],
    [0.25, 0, 0.07],
    [0.2, 0, 0.18],
    [0.5, 0, 0.37],
    [0.43, 0, 0.4],
    [0.45, 0, 0.58],
    [0.3, 0, 0.57],
    [0.27, 0, 0.67],
    [0.11, 0, 0.52],
    [0.2, 0, 0.82],
    [0.08, 0, 0.77],
    [0, 0, 1],
    [-0.08, 0, 0.77],
    [-0.2, 0, 0.82],
    [-0.11, 0, 0.52],
    [-0.27, 0, 0.67],
    [-0.3, 0, 0.57],
    [-0.45, 0, 0.58],
    [-0.43, 0, 0.4],
    [-0.5, 0, 0.37],
    [-0.2, 0, 0.18],
    [-0.25, 0, 0.07],
    [-0.005, 0, 0.1],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 23, 24],
    [1, 2, 3, 4, 5],
    [23, 22, 21, 20, 19],
    [1, 5, 6, 7, 8],
    [23, 19, 18, 17, 16],
    [1, 8, 9, 10, 11],
    [23, 16, 15, 14, 13],
    [1, 11, 12, 13, 23],
  ],
};

/**
 * Palmate leaf shape (palm-like).
 */
const PALMATE: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.005, 0, 0.1],
    [0.25, 0, 0.1],
    [0.5, 0, 0.3],
    [0.2, 0, 0.45],
    [0, 0, 1],
    [-0.2, 0, 0.45],
    [-0.5, 0, 0.3],
    [-0.25, 0, 0.1],
    [-0.005, 0, 0.1],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 9, 10],
    [1, 2, 3, 4],
    [1, 4, 5, 6, 9],
    [9, 8, 7, 6],
  ],
};

/**
 * Spiky oak leaf shape.
 */
const SPIKY_OAK: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.005, 0, 0.1],
    [0.16, 0, 0.17],
    [0.11, 0, 0.2],
    [0.23, 0, 0.33],
    [0.15, 0, 0.34],
    [0.32, 0, 0.55],
    [0.16, 0, 0.5],
    [0.27, 0, 0.75],
    [0.11, 0, 0.7],
    [0.18, 0, 0.9],
    [0.07, 0, 0.86],
    [0, 0, 1],
    [-0.07, 0, 0.86],
    [-0.18, 0, 0.9],
    [-0.11, 0, 0.7],
    [-0.27, 0, 0.75],
    [-0.16, 0, 0.5],
    [-0.32, 0, 0.55],
    [-0.15, 0, 0.34],
    [-0.23, 0, 0.33],
    [-0.11, 0, 0.2],
    [-0.16, 0, 0.17],
    [-0.005, 0, 0.1],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 23, 24],
    [1, 2, 3],
    [3, 4, 5],
    [5, 6, 7],
    [7, 8, 9],
    [9, 10, 11],
    [1, 3, 5, 7, 9, 11, 12, 13, 15, 17, 19, 21, 23],
    [23, 22, 21],
    [21, 20, 19],
    [19, 18, 17],
    [17, 16, 15],
    [15, 14, 13],
  ],
};

/**
 * Rounded oak leaf shape.
 */
const ROUNDED_OAK: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.005, 0, 0.1],
    [0.11, 0, 0.16],
    [0.11, 0, 0.2],
    [0.22, 0, 0.26],
    [0.23, 0, 0.32],
    [0.15, 0, 0.34],
    [0.25, 0, 0.45],
    [0.23, 0, 0.53],
    [0.16, 0, 0.5],
    [0.23, 0, 0.64],
    [0.2, 0, 0.72],
    [0.11, 0, 0.7],
    [0.16, 0, 0.83],
    [0.12, 0, 0.87],
    [0.06, 0, 0.85],
    [0.07, 0, 0.95],
    [0, 0, 1],
    [-0.07, 0, 0.95],
    [-0.06, 0, 0.85],
    [-0.12, 0, 0.87],
    [-0.16, 0, 0.83],
    [-0.11, 0, 0.7],
    [-0.2, 0, 0.72],
    [-0.23, 0, 0.64],
    [-0.16, 0, 0.5],
    [-0.23, 0, 0.53],
    [-0.25, 0, 0.45],
    [-0.15, 0, 0.34],
    [-0.23, 0, 0.32],
    [-0.22, 0, 0.26],
    [-0.11, 0, 0.2],
    [-0.11, 0, 0.16],
    [-0.005, 0, 0.1],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 33, 34],
    [1, 2, 3],
    [3, 4, 5, 6],
    [6, 7, 8, 9],
    [9, 10, 11, 12],
    [12, 13, 14, 15],
    [15, 16, 17],
    [1, 3, 6, 9, 12, 15, 17, 19, 22, 25, 28, 31, 33],
    [33, 32, 31],
    [31, 30, 29, 28],
    [28, 27, 26, 25],
    [25, 24, 23, 22],
    [22, 21, 20, 19],
    [19, 18, 17],
  ],
};

/**
 * Elliptic leaf shape (default).
 */
const ELLIPTIC: LeafShapeGeometry = {
  vertices: [
    [0.005, 0, 0],
    [0.005, 0, 0.1],
    [0.15, 0, 0.2],
    [0.25, 0, 0.45],
    [0.2, 0, 0.75],
    [0, 0, 1],
    [-0.2, 0, 0.75],
    [-0.25, 0, 0.45],
    [-0.15, 0, 0.2],
    [-0.005, 0, 0.1],
    [-0.005, 0, 0],
  ],
  faces: [
    [0, 1, 9, 10],
    [1, 2, 3, 4],
    [4, 5, 6],
    [6, 7, 8, 9],
    [4, 6, 9, 1],
  ],
};

/**
 * Rectangle leaf shape (good for image textures).
 */
const RECTANGLE: LeafShapeGeometry = {
  vertices: [
    [-0.5, 0, 0],
    [-0.5, 0, 1],
    [0.5, 0, 1],
    [0.5, 0, 0],
  ],
  faces: [[0, 1, 2, 3]],
  uvs: [
    [0, 0],
    [0, 1],
    [1, 1],
    [1, 0],
  ],
};

/**
 * Triangle leaf shape.
 */
const TRIANGLE: LeafShapeGeometry = {
  vertices: [
    [-0.5, 0, 0],
    [0, 0, 1],
    [0.5, 0, 0],
  ],
  faces: [[0, 1, 2]],
  uvs: [
    [0, 0],
    [0.5, 1],
    [1, 0],
  ],
};

/**
 * Cherry blossom shape.
 */
const CHERRY: LeafShapeGeometry = {
  vertices: [
    [0, 0, 0],
    [0.33, 0.45, 0.45],
    [0.25, 0.6, 0.6],
    [0, 0.7, 0.7],
    [-0.25, 0.6, 0.6],
    [-0.33, 0.45, 0.45],
    [0.49, 0.42, 0.6],
    [0.67, 0.22, 0.7],
    [0.65, -0.05, 0.6],
    [0.53, -0.17, 0.45],
    [0.55, -0.33, 0.6],
    [0.41, -0.57, 0.7],
    [0.15, -0.63, 0.6],
    [0, -0.55, 0.45],
    [-0.15, -0.63, 0.6],
    [-0.41, -0.57, 0.7],
    [-0.55, -0.33, 0.6],
    [-0.53, -0.17, 0.45],
    [-0.65, -0.05, 0.6],
    [-0.67, 0.22, 0.7],
    [-0.49, 0.42, 0.6],
  ],
  faces: [
    [0, 1, 2, 3],
    [0, 3, 4, 5],
    [0, 1, 6, 7],
    [0, 7, 8, 9],
    [0, 9, 10, 11],
    [0, 11, 12, 13],
    [0, 13, 14, 15],
    [0, 15, 16, 17],
    [0, 17, 18, 19],
    [0, 19, 20, 5],
  ],
};

/**
 * Orange blossom shape.
 */
const ORANGE: LeafShapeGeometry = {
  vertices: [
    [0, 0, 0],
    [-0.055, 0.165, 0.11],
    [-0.125, 0.56, 0.365],
    [0, 0.7, 0.45],
    [0.125, 0.56, 0.365],
    [0.055, 0.165, 0.11],
    [0.14, 0.1, 0.11],
    [0.495, 0.29, 0.365],
    [0.665, 0.215, 0.45],
    [0.57, 0.055, 0.36],
    [0.175, 0, 0.11],
    [0.14, -0.1, 0.11],
    [0.43, -0.38, 0.365],
    [0.41, -0.565, 0.45],
    [0.23, -0.53, 0.365],
    [0.05, -0.165, 0.11],
    [-0.14, -0.1, 0.11],
    [-0.43, -0.38, 0.365],
    [-0.41, -0.565, 0.45],
    [-0.23, -0.53, 0.365],
    [-0.05, -0.165, 0.11],
    [-0.14, 0.1, 0.11],
    [-0.495, 0.29, 0.365],
    [-0.665, 0.215, 0.45],
    [-0.57, 0.055, 0.36],
    [-0.175, 0, 0.11],
    [0.1, -0.1, 0.4],
    [-0.1, -0.1, 0.4],
    [-0.1, 0.1, 0.4],
    [0.1, 0.1, 0.4],
  ],
  faces: [
    [0, 1, 2, 3],
    [0, 3, 4, 5],
    [0, 6, 7, 8],
    [0, 8, 9, 10],
    [0, 11, 12, 13],
    [0, 13, 14, 15],
    [0, 16, 17, 18],
    [0, 18, 19, 20],
    [0, 21, 22, 23],
    [0, 23, 24, 25],
    [0, 26, 27],
    [0, 27, 28],
    [0, 28, 29],
    [0, 29, 26],
  ],
};

/**
 * Magnolia blossom shape.
 */
const MAGNOLIA: LeafShapeGeometry = {
  vertices: [
    [0, 0, 0],
    [0.19, -0.19, 0.06],
    [0.19, -0.04, 0.06],
    [0.34, -0.11, 0.35],
    [0.3, -0.3, 0.6],
    [0.11, -0.34, 0.35],
    [0.04, -0.19, 0.06],
    [0.19, 0.19, 0.06],
    [0.19, 0.04, 0.06],
    [0.34, 0.11, 0.35],
    [0.3, 0.3, 0.6],
    [0.11, 0.34, 0.35],
    [0.04, 0.19, 0.06],
    [-0.19, -0.19, 0.06],
    [-0.19, -0.04, 0.06],
    [-0.34, -0.11, 0.35],
    [-0.3, -0.3, 0.6],
    [-0.11, -0.34, 0.35],
    [-0.04, -0.19, 0.06],
    [-0.19, 0.19, 0.06],
    [-0.19, 0.04, 0.06],
    [-0.34, 0.11, 0.35],
    [-0.3, 0.3, 0.6],
    [-0.11, 0.34, 0.35],
    [-0.04, 0.19, 0.06],
    [0, -0.39, 0.065],
    [0.15, -0.23, 0.065],
    [0.23, -0.46, 0.39],
    [0, -0.62, 0.65],
    [-0.23, -0.46, 0.39],
    [-0.15, -0.23, 0.065],
    [0, 0.39, 0.065],
    [0.15, 0.23, 0.065],
    [0.23, 0.46, 0.39],
    [0, 0.62, 0.65],
    [-0.23, 0.46, 0.39],
    [-0.15, 0.23, 0.065],
    [-0.39, 0, 0.065],
    [-0.23, 0.15, 0.065],
    [-0.46, 0.23, 0.39],
    [-0.62, 0, 0.65],
    [-0.46, -0.23, 0.39],
    [-0.23, -0.15, 0.065],
    [0.39, 0, 0.065],
    [0.23, 0.15, 0.065],
    [0.46, 0.23, 0.39],
    [0.62, 0, 0.65],
    [0.46, -0.23, 0.39],
    [0.23, -0.15, 0.065],
  ],
  faces: [
    [0, 1, 2],
    [1, 2, 3],
    [1, 3, 4],
    [1, 4, 5],
    [1, 5, 6],
    [1, 6, 0],
    [0, 7, 8],
    [7, 8, 9],
    [7, 9, 10],
    [7, 10, 11],
    [7, 11, 12],
    [7, 12, 0],
    [0, 13, 14],
    [13, 14, 15],
    [13, 15, 16],
    [13, 16, 17],
    [13, 17, 18],
    [13, 18, 0],
    [0, 19, 20],
    [19, 20, 21],
    [19, 21, 22],
    [19, 22, 23],
    [19, 23, 24],
    [19, 24, 0],
    [0, 25, 26],
    [25, 26, 27],
    [25, 27, 28],
    [25, 28, 29],
    [25, 29, 30],
    [25, 30, 0],
    [0, 31, 32],
    [31, 32, 33],
    [32, 33, 34],
    [31, 34, 35],
    [31, 35, 36],
    [31, 36, 0],
    [0, 37, 38],
    [37, 38, 39],
    [37, 39, 40],
    [37, 40, 41],
    [37, 41, 42],
    [37, 42, 0],
    [0, 43, 44],
    [43, 44, 45],
    [43, 45, 46],
    [43, 46, 47],
    [43, 47, 48],
    [43, 48, 0],
  ],
};

/**
 * Get leaf shape geometry by type.
 *
 * @param type - Leaf shape type (1-10)
 * @returns Leaf shape geometry
 */
export function getLeafShape(type: LeafShapeType): LeafShapeGeometry {
  switch (type) {
    case LeafShape.Default:
    case LeafShape.Elliptic:
      return ELLIPTIC;
    case LeafShape.Ovate:
      return OVATE;
    case LeafShape.Linear:
      return LINEAR;
    case LeafShape.Cordate:
      return CORDATE;
    case LeafShape.Maple:
      return MAPLE;
    case LeafShape.Palmate:
      return PALMATE;
    case LeafShape.SpikyOak:
      return SPIKY_OAK;
    case LeafShape.RoundedOak:
      return ROUNDED_OAK;
    case LeafShape.Rectangle:
      return RECTANGLE;
    case LeafShape.Triangle:
      return TRIANGLE;
    default:
      return ELLIPTIC;
  }
}

/**
 * Get blossom shape geometry by type.
 *
 * @param type - Blossom shape type (1-3)
 * @returns Blossom shape geometry
 */
export function getBlossomShape(type: BlossomShapeType): LeafShapeGeometry {
  switch (type) {
    case BlossomShape.Cherry:
      return CHERRY;
    case BlossomShape.Orange:
      return ORANGE;
    case BlossomShape.Magnolia:
      return MAGNOLIA;
    default:
      return CHERRY;
  }
}

/**
 * All leaf shapes for iteration.
 */
export const ALL_LEAF_SHAPES: Record<string, LeafShapeGeometry> = {
  ovate: OVATE,
  linear: LINEAR,
  cordate: CORDATE,
  maple: MAPLE,
  palmate: PALMATE,
  spikyOak: SPIKY_OAK,
  roundedOak: ROUNDED_OAK,
  elliptic: ELLIPTIC,
  rectangle: RECTANGLE,
  triangle: TRIANGLE,
};

/**
 * All blossom shapes for iteration.
 */
export const ALL_BLOSSOM_SHAPES: Record<string, LeafShapeGeometry> = {
  cherry: CHERRY,
  orange: ORANGE,
  magnolia: MAGNOLIA,
};
